<div class="label-input-cont">
    <app-label text="Subtasks"></app-label>
    <form class="input-hint-cont pos-relative" (submit)="onAdd()">
        <input [value]="value" class="input" type="text" placeholder="Add new subtask" (input)="onInputChange($event)">
        <div class="icon-cont">
            @if (isFilled()) {
            <button class="icon-btn cancel" type="button" (click)="onEmpty()"></button>
            <div class="icon-border"></div>
            <button class="icon-btn check" type="button" (click)="onAdd()"></button>
            } @else {
            <img class="add" src="../../../../assets/img/add-task/add_subtask.png" alt="add_subtask">
            }
        </div>
    </form>

    <ul *ngIf="isSubtasksFilled()" class="subtasks-list">
        <div *ngFor="let subtask of subtasks; index as i" (click)="onStop($event)">
            @if (!subtask.focussed) {
            <div class="subtask-item pos-relative" (click)="onOpen(i)">
                <li class="li">{{ subtask.text }}</li>
                <div class="subtask-icon-cont">
                    <button class="icon-btn edit" type="button" (click)="onEdit(i)"></button>
                    <div class="icon-border"></div>
                    <button class="icon-btn delete" type="button" (click)="onDelete(i)"></button>
                </div>
            </div>
            } @else {
            <form class="pos-relative" (submit)="onSave(i)">
                <input [(ngModel)]="subtasks[i].text" name="subtask" class="subtask-input" type="text">
                <div class="subtask-icon-cont d-flex">
                    <button class="icon-btn delete" type="button" (click)="onDelete(i)"></button>
                    <div class="icon-border"></div>
                    <button class="icon-btn check" type="button" (click)="onSave(i)"></button>
                </div>
            </form>
            }
        </div>
    </ul>
</div>